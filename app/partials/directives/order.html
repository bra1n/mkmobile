<b>Seller: {{order.seller.username}}</b>
<span class="seller-details" mkm-user user="order.seller"></span>
<a class="icon comment" ng-hide="order.actor == 'seller'" href="/messages/{{order.seller.idUser}}"></a>
<div class="seller-address" ng-show="order.seller.address">
  Seller's address<br>
  {{order.seller.name.firstName}} {{order.seller.name.lastName}}<br>
  <span ng-show="order.seller.address.street"> {{order.seller.address.street}}, </span>
  <span ng-show="order.seller.address.extra">  {{order.seller.address.extra}},  </span>
  <span ng-show="order.seller.address.zip">    {{order.seller.address.zip}}     </span>
  <span ng-show="order.seller.address.city">   {{order.seller.address.city}},   </span>
  <span ng-show="order.seller.address.country">
    <span class="icon country country-{{order.seller.address.country}}"></span>
    {{order.seller.address.country | findInMap:countries}}
  </span>
  <hr>
</div>

<div ng-show="order.buyer">
  <b>Buyer: {{order.buyer.username}}</b>
  <span class="buyer-details" mkm-user user="order.buyer"></span>
  <a class="icon comment" ng-hide="order.actor == 'buyer'" href="/messages/{{order.buyer.idUser}}"></a>
  <div class="buyer-address" ng-show="order.shippingAddress">
    Shipping address<br>
    {{order.shippingAddress.name}}<br>
    <span ng-show="order.shippingAddress.street"> {{order.shippingAddress.street}}, </span>
    <span ng-show="order.shippingAddress.extra">  {{order.shippingAddress.extra}},  </span>
    <span ng-show="order.shippingAddress.zip">    {{order.shippingAddress.zip}}     </span>
    <span ng-show="order.shippingAddress.city">   {{order.shippingAddress.city}},   </span>
    <span ng-show="order.shippingAddress.country">
      <span class="icon country country-{{order.shippingAddress.country}}"></span>
      {{order.shippingAddress.country | findInMap:countries}}
    </span>
  </div>
</div>

<div class="overview">
  <ng-pluralize count="order.articleCount" when="{0:'No articles',one:'1 article',other:'{} articles'}"></ng-pluralize>
  <span>Price</span>
</div>
<ul class="articles">
  <li ng-repeat="article in order.article" ng-hide="!article.count">
    <div class="card">
      <button ng-click="removeArticle(article, order)" ng-show="removeArticle">-</button>
      {{article.count}}
      <a href="/product/{{article.idProduct}}">{{article.product.name}}</a>
    </div>
    <div class="icons">
      <span class="icon rarity rarity-{{article.product.rarity}}" ng-show="article.product.rarity"></span>
      <span class="icon expansion expansion-{{article.product.expansion | expansionIcon}}" ng-show="article.product.expansion"></span>
      <span class="icon language language-{{article.language.idLanguage}}" ng-show="article.language.idLanguage"></span>
      <span class="icon grading grading-{{article.condition}}" ng-show="article.condition"></span>
      <span class="icon is-foil" ng-show="article.isFoil"></span>
      <span class="icon is-signed" ng-show="article.isSigned"></span>
      <span class="icon is-playset" ng-show="article.isPlayset"></span>
      <span class="icon is-altered" ng-show="article.isAltered"></span>
    </div>
    <div class="price">
      {{article.price | currency:"€"}}
      <span class="price-per-card" ng-show="article.isPlayset">({{article.price / 4 | currency:"€"}})</span>
    </div>
  </li>
</ul>
<hr>
<span ng-hide="order.shippingMethods">
  {{order.shippingMethod.name}} - {{order.shippingMethod.price | currency:"€"}}
</span>
<select ng-model="order.shippingMethod.idShippingMethod" ng-change="shippingMethod(order)" ng-show="order.shippingMethods"
        ng-options="sm.value as sm.label group by sm.group for sm in order.shippingMethods"></select>
<hr>
<div class="total">
  Total - {{order.totalValue | currency:"€"}}
  <i>Items + Shipping Method</i>
</div>