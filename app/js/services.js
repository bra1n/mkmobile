// Generated by CoffeeScript 1.7.1
var mkmobileServices;

mkmobileServices = angular.module('mkmobileServices', ['ngResource']);

mkmobileServices.factory('MkmApi', [
  '$resource', function($resource) {
    return $resource('/api/:type/:param1/:param2/:param3/:param4/:param5', {}, {
      search: {
        method: 'GET',
        params: {
          type: "products",
          param2: "1",
          param3: "1",
          param4: "false"
        },
        unique: true
      },
      articles: {
        method: 'GET',
        params: {
          type: "articles"
        },
        transformResponse: function(data, headers) {
          var response;
          response = angular.fromJson(data);
          response.article = [].concat(response.article);
          if (headers()['range'] != null) {
            response.count = headers()['range'].replace(/^.*\//g, '');
          } else {
            response.count = response['article'].length;
          }
          return response;
        }
      },
      product: {
        method: 'GET',
        params: {
          type: "product"
        }
      }
    });
  }
]);

mkmobileServices.factory('DataCache', function() {
  var cache;
  cache = {
    product: {}
  };
  return {
    product: function(id, data) {
      if (data != null) {
        cache.product[id] = data;
      }
      if (id != null) {
        return cache.product[id];
      }
    }
  };
});

//# sourceMappingURL=services.map
