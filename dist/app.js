/*! mkmobile - v0.9.3 - 2014-06-25
 * Author: Steffen Baumgart <steffen@baumgart.biz>
 * https://github.com/bra1n/mkmobile
 * Copyright (c) 2014 ; Sammelkartenmarkt Ltd. & Co. KG */
var generateOAuthHeader,mkmobileApp,mkmobileControllers,mkmobileServices,toXML;mkmobileApp=angular.module("mkmobileApp",["ngRoute","ngAnimate","tmh.dynamicLocale","pascalprecht.translate","mkmobileControllers","mkmobileFilters","mkmobileServices","mkmobileDirectives","templates","locales"]),angular.module("templates",[]),angular.module("locales",[]),mkmobileApp.config(["$locationProvider","$routeProvider",function(a,b){return a.html5Mode(!0),b.when("/home",{templateUrl:"/partials/pages/home.html",controller:"HomeCtrl"}).when("/help",{templateUrl:"/partials/pages/help.html",controller:"HomeCtrl"}).when("/contact",{templateUrl:"/partials/pages/contact.html",controller:"HomeCtrl"}).when("/legal",{templateUrl:"/partials/pages/legal.html",controller:"HomeCtrl"}).when("/payment/:method",{templateUrl:"/partials/pages/payment.html",controller:"PaymentCtrl"}).when("/search",{templateUrl:"/partials/pages/search.html",controller:"SearchCtrl"}).when("/cart",{templateUrl:"/partials/pages/cart.html",controller:"CartCtrl"}).when("/cart/address",{templateUrl:"/partials/pages/address.html",controller:"CartCtrl"}).when("/cart/checkout/:method",{templateUrl:"/partials/pages/checkout.html",controller:"CartCtrl"}).when("/cart/:orderId",{templateUrl:"/partials/pages/order.html",controller:"CartCtrl"}).when("/stock",{templateUrl:"/partials/pages/stock.html",controller:"StockCtrl"}).when("/stock/:articleId",{templateUrl:"/partials/pages/article.html",controller:"StockCtrl"}).when("/settings",{templateUrl:"/partials/pages/settings.html",controller:"SettingsCtrl"}).when("/buys",{templateUrl:"/partials/pages/orders.html",controller:"OrderCtrl"}).when("/buys/:orderId",{templateUrl:"/partials/pages/order.html",controller:"OrderCtrl"}).when("/buys/:orderId/evaluate",{templateUrl:"/partials/pages/evaluate.html",controller:"OrderCtrl"}).when("/sells",{templateUrl:"/partials/pages/orders.html",controller:"OrderCtrl"}).when("/sells/:orderId",{templateUrl:"/partials/pages/order.html",controller:"OrderCtrl"}).when("/messages",{templateUrl:"/partials/pages/messages.html",controller:"MessageCtrl"}).when("/messages/:userId",{templateUrl:"/partials/pages/message.html",controller:"MessageCtrl"}).when("/login",{templateUrl:"/partials/pages/login.html",controller:"SearchCtrl",noLogin:!0}).when("/product/:productId",{templateUrl:"/partials/pages/product.html",controller:"ProductCtrl",noLogin:!0}).when("/callback",{templateUrl:"/partials/pages/callback.html",controller:"CallbackCtrl",noLogin:!0}).otherwise({redirectTo:"/home"})}]),mkmobileApp.config(["$httpProvider",function(a){return a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"],a.interceptors.push(["$q",function(a){var b;return b={},{request:function(c){var d;return c.unique&&(null!=(d=b[c.unique])&&d.resolve(),b[c.unique]=a.defer(),c.timeout=b[c.unique].promise),null!=c.oauth&&(c.headers.Authorization=generateOAuthHeader(c)),null!=c.headers["Content-type"]&&(c.transformRequest=function(a){return toXML(a)}),c||a.when(c)},response:function(b){return null!=b.headers()["content-range"]&&(b.data._range=parseInt(b.headers()["content-range"].replace(/^.*\//,""),10)||0),b||a.when(b)}}}])}]),mkmobileApp.config(["tmhDynamicLocaleProvider","$translateProvider",function(a,b){var c;return c=function(){switch((navigator.language||navigator.userLanguage).toLowerCase().substr(0,2)){case"fr":return"fr_FR";case"de":return"de_DE";case"es":return"es_ES";case"it":return"it_IT";default:return"en_GB"}}(),b.useStaticFilesLoader({prefix:"/translations/lang-",suffix:".json"}).fallbackLanguage("en_GB").preferredLanguage(c),a.localeLocationPattern("/lib/angular-i18n/angular-locale_{{locale}}.js"),a.defaultLocale(c.replace(/_/,"-").toLowerCase())}]),mkmobileApp.run(["$rootScope","MkmApiAuth","$translate",function(a,b,c){var d;return a.$on("$routeChangeStart",function(a,c){var d;return(null!=(d=c.$$route)?d.noLogin:void 0)||b.checkLogin()?void 0:a.preventDefault()}),d=function(){return c(["titles.app","titles."+a.viewClass]).then(function(b){return a.viewTitle=b["titles.app"]+" â€” "+b["titles."+a.viewClass],a.language=c.use().substr(0,2)})},a.$on("$routeChangeSuccess",function(c,e){var f,g,h;return null!=(null!=(f=e.$$route)?f.originalPath:void 0)&&(null!=(g=e.$$route)?g.originalPath.split("/").length:void 0)>1?(a.viewClass=null!=(h=e.$$route)?h.originalPath.split("/")[1]:void 0,a.loggedIn=b.isLoggedIn()?"loggedin":"loggedout",d()):void 0}),a.$on("$translateChangeSuccess",function(){return d()})}]),mkmobileServices=angular.module("mkmobileServices",["ngResource"]),mkmobileControllers=angular.module("mkmobileControllers",[]),generateOAuthHeader=function(a){var b,c,d,e,f,g,h,i,j;for(b=a.oauth,e={realm:a.url,oauth_consumer_key:b.consumerKey,oauth_nonce:Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.round((new Date).getTime()/1e3),oauth_token:b.token,oauth_version:"1.0",oauth_signature:""},d=["oauth_consumer_key","oauth_nonce","oauth_signature_method","oauth_timestamp","oauth_token","oauth_version"],h=[],i=0,j=d.length;j>i;i++)c=d[i],h.push(c+"="+e[c]);return g=[a.method,encodeURIComponent(e.realm),encodeURIComponent(h.join("&"))].join("&"),f=encodeURIComponent(b.consumerSecret)+"&"+encodeURIComponent(b.secret),g=CryptoJS.HmacSHA1(g,f),e.oauth_signature=g.toString(CryptoJS.enc.Base64),'OAuth realm="'+e.realm+'", oauth_version="'+e.oauth_version+'", oauth_timestamp="'+e.oauth_timestamp+'", oauth_nonce="'+e.oauth_nonce+'", oauth_consumer_key="'+e.oauth_consumer_key+'", oauth_token="'+e.oauth_token+'", oauth_signature_method="'+e.oauth_signature_method+'", oauth_signature="'+e.oauth_signature+'"'},toXML=function(a,b){var c,d,e;if(null==b&&(b=!1),e="","object"==typeof a)for(c in a)d=a[c],"object"==typeof d?d=d instanceof Array?d.map(function(a){return toXML(a,!0)}).join("</"+c+"><"+c+">"):toXML(d,!0):"undefined"!=typeof d&&(d=d.toString().replace(/[\u00A0-\u9999<>\&]/gim,function(a){return"&#"+a.charCodeAt(0)+";"})),e+="<"+c+">"+d+"</"+c+">";else"undefined"!=typeof a&&(e=a.toString().replace(/[\u00A0-\u9999<>\&]/gim,function(a){return"&#"+a.charCodeAt(0)+";"}));return b||(e='<?xml version="1.0" encoding="UTF-8" ?><request>'+e+"</request>"),e};var __indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};mkmobileControllers.controller("SearchCtrl",["$scope","$routeParams","MkmApiAuth","MkmApiMarket","$sce",function(a,b,c,d,e){return a.$watch("query",function(b){return sessionStorage.setItem("search",b),a.searchData=d.search(b)}),a.query=sessionStorage.getItem("search")||"",a.sort="name[0]['productName']",a.loadResults=function(){return a.searchData.products.length>=a.searchData.count||a.searchData.loading?void 0:d.search(a.query,a.searchData)},a.loggedIn=c.isLoggedIn(),a.handleLogin=function(){return a.iframeSrc=e.trustAsResourceUrl(c.getLoginURL()+"/"+a.language),window.handleCallback=function(b){return a.iframeSrc=null,a.login=c.getAccess(b),delete window.handleCallback}},a.logout=function(){return c.logout(),a.loggedIn=!1}}]),mkmobileControllers.controller("ProductCtrl",["$scope","$routeParams","MkmApiMarket","MkmApiCart","MkmApiAuth",function(a,b,c,d,e){return a.productData=c.product(b.productId),a.data=c.articles(b.productId),a.cart=d.count(),a.loadArticles=function(){return a.data.articles.length>=a.data.count||a.data.loading?void 0:c.articles(b.productId,a.data)},a.addToCart=function(b){return e.checkLogin()?(b.count--,d.add(b.idArticle,function(){return a.cart=d.count()})):void 0}}]),mkmobileControllers.controller("SettingsCtrl",["$scope","MkmApiAuth",function(a,b){return a.data=b.getAccount(),a.languages=b.getLanguages(),a.updateVacation=function(){return b.setVacation(a.data.account.onVacation)},a.updateLanguage=function(){return b.setLanguage(a.data.account.idDisplayLanguage)},a.logout=function(){return b.logout()}}]),mkmobileControllers.controller("HomeCtrl",["$scope",function(){}]),mkmobileControllers.controller("PaymentCtrl",["$scope","$routeParams","MkmApiAuth","$location",function(a,b,c,d){var e;return a.method=b.method,("done"===(e=a.method)||"cancel"===e)&&window.close(),a.data=c.getAccount(function(b){return b.account.paypalRecharge||"paypal"!==a.method||d.path("/").replace(),b.account.bankRecharge||"bank"!==a.method?void 0:d.path("/").replace()}),a.location=d,a.languages=c.getLanguageCodes(),a.redirect=function(){return d.path("/").replace()}}]),mkmobileControllers.controller("CallbackCtrl",["$scope","$location",function(a,b){var c,d;return c=b.search(),null!=c.request_token&&"function"==typeof(d=window.parent).handleCallback?d.handleCallback(c.request_token):void 0}]),mkmobileControllers.controller("CartCtrl",["$scope","$location","$routeParams","MkmApiCart","MkmApiMarket","$translate",function(a,b,c,d,e,f){return a.$watch("query",function(b){return sessionStorage.setItem("search",b),c.orderId?void 0:a.searchData=e.search(b)}),a.loadResults=function(){return a.searchData.products.length>=a.searchData.count||a.searchData.loading?void 0:e.search(a.query,a.searchData)},a.query=sessionStorage.getItem("search")||"",a.sort="name[0]['productName']",a.data=d.get(c.orderId,function(){return a.count=d.count(),a.sum=d.sum(),0!==a.count||null==c.orderId&&null==c.method?void 0:b.path("/cart").replace()}),a.removeArticle=function(e,f){return e.count--,a.count--,f.articleCount--,f.totalValue-=e.price,d.remove(e.idArticle,function(){return null==c.orderId||f.articleCount?a.data=d.get(c.orderId):b.path("/cart").replace()})},a.removeOrder=function(b){var e,f,g,h,i;if(f={},null!=b.article)for(i=b.article,g=0,h=i.length;h>g;g++)e=i[g],f[e.idArticle]=e.count;return a.data.cart.splice(a.data.cart.indexOf(b),1),d.remove(f,function(){return a.count=d.count(),a.sum=d.sum(),a.data=d.get(c.orderId)})},a.emptyCart=function(){return a.data.cart=[],a.count=a.sum=0,d.empty()},a.countries=d.getCountries(),a.shippingAddress=function(a){return d.shippingAddress(a,function(){return b.path("/cart")})},a.shippingMethod=function(a){return d.shippingMethod(a)},a.method=c.method,a.checkout=function(){return f("checkout.are_you_sure").then(function(c){return confirm(c)?(a.clicked=!0,d.checkout(function(){return sessionStorage.setItem("buysTab","instabuy"===a.method?"paid":"bought"),b.path(function(){switch(a.method){case"paypal":return"/payment/paypal";case"bank":return"/payment/bank";default:return"/buys"}}())})):void 0})}}]),mkmobileControllers.controller("StockCtrl",["$scope","$location","$routeParams","MkmApiStock",function(a,b,c,d){return a.selected=[],a.select=function(b){return __indexOf.call(a.selected,b)>=0?a.selected.splice(a.selected.indexOf(b),1):a.selected.push(b)},a.$watch("query",function(b){return a.selected=[],sessionStorage.setItem("searchStock",b),a.data=!b||c.articleId?d.get(c.articleId):d.search(b)}),a.loadArticles=function(){return a.data.articles.length>=a.data.count||a.data.loading?void 0:!queryg||c.articleId?d.get(c.articleId,a.data):d.search(a.query,a.data)},a.query=sessionStorage.getItem("searchStock")||"",a.increase=function(a){return d.updateBatch(a,1)},a.decrease=function(a){return d.updateBatch(a,-1)},a.languages=d.getLanguages(),a.conditions=d.getConditions(),a.save=function(){return d.update(a.data.article,function(){return b.path("/stock")})}}]),mkmobileControllers.controller("OrderCtrl",["$scope","$location","$routeParams","MkmApiOrder",function(a,b,c,d){return a.mode=b.path().substr(1).replace(/^(.*?)\/.*?$/,"$1"),a.orderId=c.orderId,a.$watch("tab",function(b){return sessionStorage.setItem(a.mode+"Tab",a.tab),a.data=d.get({mode:a.mode,status:b,orderId:a.orderId})}),a.tab=sessionStorage.getItem(a.mode+"Tab")||"bought",a.loadOrders=function(){return a.data.orders.length>=a.data.count||a.data.loading?void 0:d.get({mode:a.mode,status:a.tab,response:a.data})},a.update=function(c){return"requestCancellation"!==c||a.data.order.showReason?d.update({orderId:a.orderId,status:c,reason:a.data.order.state.reason},function(){return a.data=d.get({orderId:a.orderId}),"confirmReception"===c?b.path("/"+a.mode+"/"+a.orderId+"/evaluate"):void 0}):a.data.order.showReason=!0,!1},a.evaluations=d.getEvaluations(),a.complaints=d.getComplaints(),a.evaluation=d.getEvaluation(),a.hideOverlay=0,a.evaluate=function(){return d.evaluate(a.orderId,a.evaluation,function(){return b.path("/"+a.mode+"/"+a.orderId)})}}]),mkmobileControllers.controller("MessageCtrl",["$scope","$routeParams","MkmApiMessage","$translate",function(a,b,c,d){return a.unreadCount=c.count(),a.data=c.get(b.userId,function(){return a.unreadCount=c.count()}),a.$watch("search",function(b){return c.findUser(b,function(b){var c,d,e,f,g,h,i,j,k,l;for(c=[],a.users=[],j=a.data.messages,f=0,h=j.length;h>f;f++)d=j[f],c.push(d.partner.idUser);for(l=[],g=0,i=b.length;i>g;g++)e=b[g],k=e.idUser,__indexOf.call(c,k)<0&&l.push(a.users.push(e));return l})}),a.send=function(){return c.send(b.userId,a.message,a.data),a.message="",!1},a["delete"]=function(b,e,f){return d("messages.are_you_sure").then(function(d){return confirm(d)?(a.data.count--,a.data.messages.splice(b,1),c["delete"](e,f)):void 0})}}]);var mkmobileDirectives;mkmobileDirectives=angular.module("mkmobileDirectives",[]),mkmobileDirectives.directive("infiniteScroll",function(){return{link:function(a,b,c){var d,e;return d=document.documentElement,e=function(){return(d.scrollTop||window.pageYOffset)+d.clientHeight-b[0].offsetTop>=b[0].scrollHeight-window.innerHeight?a.$apply(c.infiniteScroll):void 0},$(window).bind("scroll",e),a.$on("$destroy",function(){return $(window).unbind("scroll",e)})}}}),mkmobileDirectives.directive("mkmFooter",["MkmApiAuth","MkmApiCart","MkmApiMessage",function(a,b,c){return{scope:{cart:"=?",messages:"=?"},link:function(d){return d.loggedIn=a.isLoggedIn(),d.cart||(d.cart=b.count()),d.messages||(d.messages=c.count()),null!=d.cart&&null!=d.messages||!d.loggedIn?void 0:a.getAccount(function(){return null==d.cart&&(d.cart=b.count()),null==d.messages?d.messages=c.count():void 0})},restrict:"E",replace:!0,templateUrl:"/partials/directives/footer.html"}}]),mkmobileDirectives.directive("mkmOrder",["MkmApiCart",function(a){return{scope:{order:"=",removeArticle:"=",shippingMethod:"="},link:function(b){return b.countries=a.getCountries()},restrict:"E",templateUrl:"/partials/directives/order.html"}}]),mkmobileDirectives.directive("mkmSearch",function(){return{restrict:"E",transclude:!0,templateUrl:"/partials/directives/search.html"}}),mkmobileDirectives.directive("mkmUser",function(){return{restrict:"A",scope:{user:"="},templateUrl:"/partials/directives/user.html"}}),mkmobileDirectives.directive("mkmProduct",function(){return{restrict:"E",scope:{productData:"="},templateUrl:"/partials/directives/product.html"}}),angular.module("mkmobileFilters",[]).filter("expansionIcon",function(){return function(a){return{backgroundPosition:a%10*-21+"px "+-21*Math.floor(a/10)+"px"}}}).filter("productImage",function(){return function(a){return null!=a&&"//www.mkmapi.eu/"+a.substr(2)||"/img/card.jpg"}}).filter("findInMap",function(){return function(a,b){var c,d,e;for(d=0,e=b.length;e>d;d++)if(c=b[d],c.value===a)return c.label}}).filter("range",function(){return function(a){var b;return function(){b=[];for(var c=1;a>=1?a>=c:c>=a;a>=1?c++:c--)b.push(c);return b}.apply(this)}}).filter("truncate",function(){return function(a,b,c){return b||(b=100),c||(c="..."),a.length<=b||a.length-c.length<=b?a:String(a).substring(0,b-c.length)+c}}),angular.module("locales",[]).run(["tmhDynamicLocaleCache",function(a){var b;return b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"},a.put("en-gb",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/yyyy HH:mm",shortDate:"dd/MM/yyyy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"Â£",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"Â¤-",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-gb",pluralCat:function(a){return 1===a?b.ONE:b.OTHER}},b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"},$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["vorm.","nachm."],DAY:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],MONTH:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],SHORTDAY:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],SHORTMONTH:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],fullDate:"EEEE, d. MMMM y",longDate:"d. MMMM y",medium:"dd.MM.yyyy HH:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"â‚¬",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"Â Â¤",posPre:"",posSuf:"Â Â¤"}]},id:"de-de",pluralCat:function(a){return 1===a?b.ONE:b.OTHER}}))}]),angular.module("locales",["locales-en-gb","locales-de-de","locales-it-it","locales-fr-fr","locales-es-es"]),angular.module("locales-en-gb",[]).run(["tmhDynamicLocaleCache",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.put("en-gb",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/yyyy HH:mm",shortDate:"dd/MM/yyyy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"Â£",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"Â¤-",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-gb",pluralCat:function(a){return 1==a?b.ONE:b.OTHER}})}]),angular.module("locales-de-de",[]).run(["tmhDynamicLocaleCache",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.put("de-de",{DATETIME_FORMATS:{AMPMS:["vorm.","nachm."],DAY:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],MONTH:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],SHORTDAY:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],SHORTMONTH:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],fullDate:"EEEE, d. MMMM y",longDate:"d. MMMM y",medium:"dd.MM.yyyy HH:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"â‚¬",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"Â Â¤",posPre:"",posSuf:"Â Â¤"}]},id:"de-de",pluralCat:function(a){return 1==a?b.ONE:b.OTHER}})}]),angular.module("locales-it-it",[]).run(["tmhDynamicLocaleCache",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.put("it-it",{DATETIME_FORMATS:{AMPMS:["m.","p."],DAY:["domenica","lunedÃ¬","martedÃ¬","mercoledÃ¬","giovedÃ¬","venerdÃ¬","sabato"],MONTH:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],SHORTDAY:["dom","lun","mar","mer","gio","ven","sab"],SHORTMONTH:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],fullDate:"EEEE d MMMM y",longDate:"dd MMMM y",medium:"dd/MMM/y HH:mm:ss",mediumDate:"dd/MMM/y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"â‚¬",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"Â¤Â -",negSuf:"",posPre:"Â¤Â ",posSuf:""}]},id:"it-it",pluralCat:function(a){return 1==a?b.ONE:b.OTHER}})}]),angular.module("locales-fr-fr",[]).run(["tmhDynamicLocaleCache",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.put("fr-fr",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],MONTH:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],SHORTDAY:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],SHORTMONTH:["janv.","fÃ©vr.","mars","avr.","mai","juin","juil.","aoÃ»t","sept.","oct.","nov.","dÃ©c."],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"â‚¬",DECIMAL_SEP:",",GROUP_SEP:"Â ",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(",negSuf:"Â Â¤)",posPre:"",posSuf:"Â Â¤"}]},id:"fr-fr",pluralCat:function(a){return a>=0&&2>=a&&2!=a?b.ONE:b.OTHER}})}]),angular.module("locales-es-es",[]).run(["tmhDynamicLocaleCache",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.put("es-es",{DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["domingo","lunes","martes","miÃ©rcoles","jueves","viernes","sÃ¡bado"],MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom","lun","mar","miÃ©","jue","vie","sÃ¡b"],SHORTMONTH:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd/MM/yyyy HH:mm:ss",mediumDate:"dd/MM/yyyy",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"â‚¬",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"Â Â¤",posPre:"",posSuf:"Â Â¤"}]},id:"es-es",pluralCat:function(a){return 1==a?b.ONE:b.OTHER}})}]),angular.module("templates",["/partials/directives/footer.html","/partials/directives/order.html","/partials/directives/product.html","/partials/directives/search.html","/partials/directives/user.html","/partials/pages/address.html","/partials/pages/article.html","/partials/pages/callback.html","/partials/pages/cart.html","/partials/pages/checkout.html","/partials/pages/contact.html","/partials/pages/evaluate.html","/partials/pages/help.html","/partials/pages/home.html","/partials/pages/legal.html","/partials/pages/login.html","/partials/pages/message.html","/partials/pages/messages.html","/partials/pages/order.html","/partials/pages/orders.html","/partials/pages/payment.html","/partials/pages/product.html","/partials/pages/search.html","/partials/pages/settings.html","/partials/pages/stock.html"]),angular.module("/partials/directives/footer.html",[]).run(["$templateCache",function(a){a.put("/partials/directives/footer.html",'<footer ng-show="loggedIn">\n  <a href="/home" class="home">\n    <span ng-show="messages">{{messages}}</span>\n  </a>\n  <a href="/search" class="search"></a>\n  <a href="/cart" class="cart">\n    <span ng-show="cart">{{cart}}</span>\n  </a>\n  <a href="/settings" class="settings"></a>\n</footer>')}]),angular.module("/partials/directives/order.html",[]).run(["$templateCache",function(a){a.put("/partials/directives/order.html",'<div class="seller">\n  <b translate="order.seller" class="title">Seller:</b>\n  <b class="title">{{order.seller.username}}</b>\n  ({{order.seller.sellCount}})\n  <span class="seller-details" mkm-user user="order.seller"></span>\n  <a class="icon comment" ng-show="order.isBuyer" href="/messages/{{order.seller.idUser}}"></a>\n  <div class="seller-address" ng-show="order.seller.address">\n    <b translate="order.seller_address" class="title">Seller\'s address</b><br>\n    <i>\n      {{order.seller.name.firstName}} {{order.seller.name.lastName}},\n      <span ng-show="order.seller.address.street"> {{order.seller.address.street}}, </span>\n      <span ng-show="order.seller.address.extra">  {{order.seller.address.extra}},  </span>\n      <span ng-show="order.seller.address.zip">    {{order.seller.address.zip}}     </span>\n      <span ng-show="order.seller.address.city">   {{order.seller.address.city}},   </span>\n      <span ng-show="order.seller.address.country">\n        <span class="icon country country-{{order.seller.address.country}}"></span>\n        {{order.seller.address.country | findInMap:countries}}\n      </span>\n    </i>\n  </div>\n</div>\n<hr ng-show="order.buyer">\n<div class="buyer" ng-show="order.buyer">\n  <b translate="order.buyer" class="title">Buyer:</b>\n  <b class="title">{{order.buyer.username}}</b> ({{order.buyer.sellCount}})\n  <span class="buyer-details" mkm-user user="order.buyer"></span>\n  <a class="icon comment" ng-hide="order.isBuyer" href="/messages/{{order.buyer.idUser}}"></a>\n  <div class="buyer-address" ng-show="order.shippingAddress">\n    <b translate="order.shipping_address" class="title">Shipping address</b><br>\n    <i>\n      {{order.shippingAddress.name}},\n      <span ng-show="order.shippingAddress.street"> {{order.shippingAddress.street}}, </span>\n      <span ng-show="order.shippingAddress.extra">  {{order.shippingAddress.extra}},  </span>\n      <span ng-show="order.shippingAddress.zip">    {{order.shippingAddress.zip}}     </span>\n      <span ng-show="order.shippingAddress.city">   {{order.shippingAddress.city}},   </span>\n      <span ng-show="order.shippingAddress.country">\n        <span class="icon country country-{{order.shippingAddress.country}}"></span>\n        {{order.shippingAddress.country | findInMap:countries}}\n      </span>\n    </i>\n  </div>\n</div>\n\n<div class="titlebar">\n  <span class="right" translate="common.price">Price</span>\n  {{order.articleCount}}\n  <span ng-show="order.articleCount == 1" translate="common.article"></span>\n  <span ng-show="order.articleCount != 1" translate="common.articles"></span>\n</div>\n\n<ul class="articles">\n  <li ng-repeat="article in order.article" ng-hide="!article.count">\n    <div class="controls" ng-show="removeArticle">\n      <button class="remove" ng-click="removeArticle(article, order)"></button>\n    </div>\n    <div class="card">\n      {{article.count}}x\n      <a href="/product/{{article.idProduct}}">{{article.product.name}}</a>\n    </div>\n    <div class="icons">\n      <span class="icon expansion" ng-style="article.product.expIcon | expansionIcon" ng-show="article.product.expansion"></span>\n      <span class="icon rarity rarity-{{article.product.rarity}}" ng-show="article.product.rarity"></span>\n      <span class="icon language language-{{article.language.idLanguage}}" ng-show="article.language.idLanguage"></span>\n      <span class="icon grading grading-{{article.condition}}" ng-show="article.condition"></span>\n      <span class="icon is-foil" ng-show="article.isFoil"></span>\n      <span class="icon is-signed" ng-show="article.isSigned"></span>\n      <span class="icon is-playset" ng-show="article.isPlayset"></span>\n      <span class="icon is-altered" ng-show="article.isAltered"></span>\n    </div>\n    <div class="price">\n      {{article.price | currency:"â‚¬"}}\n      <span class="price-per-card" ng-show="article.isPlayset">({{article.price / 4 | currency:"â‚¬"}})</span>\n    </div>\n  </li>\n</ul>\n<div class="shipping">\n<span ng-hide="order.shippingMethods">\n  {{order.shippingMethod.name}} - {{order.shippingMethod.price | currency:"â‚¬"}}\n</span>\n<select ng-model="order.shippingMethod.idShippingMethod" ng-change="shippingMethod(order)" ng-show="order.shippingMethods"\n        ng-options="sm.value as sm.label group by \'common.\'+sm.group | translate for sm in order.shippingMethods"></select>\n</div>\n<hr>\n<div class="total">\n  <span translate="common.total"></span> - {{order.totalValue | currency:"â‚¬"}}\n  <i translate="common.items_shipping"></i>\n</div>')}]),angular.module("/partials/directives/product.html",[]).run(["$templateCache",function(a){a.put("/partials/directives/product.html",'<aside class="slider" ng-class="!!slider && \'open\'">\n  <div class="content">\n    <div class="aligner"></div><div class="data">\n      <img src="" ng-src="{{productData.product.image | productImage}}">\n      <div class="text">\n        <b translate="product.available">Available Items:</b>\n        {{productData.product.countArticles | number}}<br>\n        <b translate="product.from">From (EX+):</b>\n        {{productData.product.priceGuide.LOW | currency:"â‚¬"}}<br>\n        <b translate="product.average">Average price (EX+):</b>\n        {{productData.product.priceGuide.AVG | currency:"â‚¬"}}<br>\n        <span ng-show="productData.product.countFoils">\n          <b translate="product.foils">Available foils:</b>\n          {{productData.product.countFoils | number}}<br>\n        </span>\n        <span ng-show="productData.product.countFoils">\n          <b translate="product.foils_from">Foils from:</b>\n          {{productData.product.priceGuide.LOWFOIL | currency:"â‚¬"}}<br></span>\n        <div class="reprints" ng-show="productData.product.reprint">\n          <b translate="product.reprints">Also available in:</b><br>\n          <a href="/product/{{reprint.idProduct}}" ng-repeat="reprint in productData.product.reprint">\n            <span class="icon expansion" ng-style="reprint.expIcon | expansionIcon"></span>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="toggle" ng-click="slider=!slider">...</div>\n</aside>')}]),angular.module("/partials/directives/search.html",[]).run(["$templateCache",function(a){a.put("/partials/directives/search.html",'<div class="search subheadline">\n  <div class="left"><input ng-model="query" id="search" placeholder="{{\'common.search\' | translate}}"></div>\n  <div class="right"><button ng-show="query != \'\'" ng-click="query = \'\'">{{\'search.cancel\' | translate}}</button></div>\n</div>\n<div class="results" ng-show="query != \'\'">\n  <h3>\n    <span ng-show="!searchData.loading"\n          translate="search.results" translate-value-count="{{searchData.count | number}}">Results</span>\n    <span class="error" ng-show="searchData.error" translate="search.error">Error loading search results</span>\n    <span ng-show="searchData.count > 0" translate="search.sort">Sort</span>\n    <select ng-model="sort" ng-show="searchData.count > 0">\n      <option value="name[0][\'productName\']" translate="search.name">Name</option>\n      <option value="expIcon" translate="search.expansion">Expansion</option>\n      <option value="rarity" translate="search.rarity">Rarity</option>\n    </select>\n  </h3>\n  <ul ng-class="{loading:searchData.loading}" data-infinite-scroll="loadResults()">\n    <li class="link" ng-repeat="product in searchData.products | orderBy:sort">\n      <a href="/product/{{product.idProduct}}">\n        <span class="icon expansion" ng-style="product.expIcon | expansionIcon" ng-show="product.expansion"></span>\n        <span class="icon rarity rarity-{{product.rarity}}" ng-show="product.rarity"></span>\n        {{product.name[0].productName}}\n      </a>\n    </li>\n  </ul>\n</div>\n<div class="empty" ng-hide="searchData.count > 0 || searchData.loading" ng-transclude translate></div>')
}]),angular.module("/partials/directives/user.html",[]).run(["$templateCache",function(a){a.put("/partials/directives/user.html",'<span ng-show="user.country" class="icon country country-{{user.country}}"></span>\n<span class="icon reputation reputation-{{user.reputation}}"></span>\n<span class="icon commercial commercial-{{user.isCommercial}}"></span>\n<span class="icon risk risk-{{user.riskGroup}}"></span>\n<span class="icon shipspeed shipspeed-{{user.shipsFast}}"></span>\n<span class="icon vacation-{{user.onVacation}}"></span>')}]),angular.module("/partials/pages/address.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/address.html",'<header>\n  <a href="/cart" class="back"></a>\n  <span translate="address.title"></span>\n</header>\n<article>\n  <form class="address">\n    <label for="name" translate="address.name"></label><input id="name" type="text" ng-model="data.address.name"><br>\n    <label for="street" translate="address.street"></label><input id="street" type="text" ng-model="data.address.street"><br>\n    <label for="extra" translate="address.additional"></label><input id="extra" type="text" ng-model="data.address.extra"><br>\n    <label for="city" translate="address.city"></label><input id="city" type="text" ng-model="data.address.city"><br>\n    <label for="zip" translate="address.zip"></label><input id="zip" type="text" ng-model="data.address.zip"><br>\n    <label for="country" translate="address.country"></label><select id="country"\n            ng-options="country as \'address.countries.\'+country | translate for country in countries"\n            ng-model="data.address.country" required></select><br>\n    <button class="button" ng-click="shippingAddress(data.address)" translate="common.save"></button>\n  </form>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/article.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/article.html",'<header class="product" ng-class="{loading:data.product.loading}">\n  <a href="/stock" class="back"></a>\n  <span class="error ng-hide" ng-show="data.product.error" translate="product.error"></span>\n  <span ng-show="data.product.product">{{data.article.count}}x {{data.product.product.name[0].productName}}</span>\n  <span ng-show="data.product.product.number" translate translate-values="data.product.product">product.nr</span>\n  <div class="box">\n    <span ng-show="data.product.product.expansion" class="icon expansion" ng-style="data.product.product.expIcon | expansionIcon"></span>\n    <span ng-show="data.product.product.rarity" class="icon rarity rarity-{{data.product.product.rarity}}"></span>\n  </div>\n</header>\n<mkm-product product-data="data.product"></mkm-product>\n<article class="product">\n  <div class="loading" ng-show="data.loading" translate="common.loading"></div>\n  <div class="error" ng-show="data.error" translate="article.not_found"></div>\n  <form ng-show="data.article">\n    <span ng-hide="data.article.count < 2">\n      <label for="count" translate="article.count"></label>\n      <select id="count" ng-model="data.article.amount">\n        <option ng-repeat="x in data.article.count - 1 | range">{{x}}</option>\n        <option value="">{{data.article.count}}</option>\n      </select><br>\n    </span>\n    <label for="language" translate="common.language"></label>\n    <span class="icon language language-{{data.article.language.idLanguage}}"></span>\n    <select id="language" ng-options="language as \'article.languages.\'+language | translate for language in languages"\n            ng-model="data.article.language.idLanguage" required></select>\n    <hr>\n    <label for="condition" translate="article.condition"></label>\n    <span class="icon grading grading-{{data.article.condition}}"></span>\n    <select id="condition" ng-options="condition as \'article.conditions.\'+condition | translate for condition in conditions"\n            ng-model="data.article.condition" required></select>\n    <hr>\n    <label for="isFoil" translate="article.foil"></label>\n    <label for="isFoil">\n      <input type="checkbox" ng-model="data.article.isFoil" id="isFoil">\n    </label>\n    <br>\n    <label for="isSigned" translate="article.signed"></label>\n    <label for="isSigned">\n      <input type="checkbox" ng-model="data.article.isSigned" id="isSigned">\n    </label>\n    <br>\n    <label for="isPlayset" translate="article.playset"></label>\n    <label for="isPlayset">\n      <input type="checkbox" ng-model="data.article.isPlayset" id="isPlayset">\n    </label>\n    <br>\n    <label for="isAltered" translate="article.altered"></label>\n    <label for="isAltered">\n      <input type="checkbox" ng-model="data.article.isAltered" id="isAltered">\n    </label>\n    <hr>\n    <label for="comment" translate="common.comment"></label>\n    <input type="text" id="comment" ng-model="data.article.comments" placeholder="{{\'common.comment\' | translate}}"><br>\n    <label for="price" translate="common.price"></label>\n    <input id="price" type="number" step="0.01" min="0.01" ng-model="data.article.price"><br>\n    <button class="button" ng-click="save()" translate="common.save"></button>\n  </form>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/callback.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/callback.html",'<span translate="callback"></span>')}]),angular.module("/partials/pages/cart.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/cart.html",'<header translate="titles.cart"></header>\n<article>\n  <mkm-search ng-hide="data.cart.length || data.loading">cart.empty</mkm-search>\n  <div class="overview" ng-show="data.cart.length">\n    <a href="/cart/address" class="address link">\n      <span class="title" translate="cart.shipping_address"></span>\n      <i>\n        {{data.address.name}},\n        <span ng-show="data.address.street"> {{data.address.street}}, </span>\n        <span ng-show="data.address.extra">  {{data.address.extra}},  </span>\n        <span ng-show="data.address.zip">    {{data.address.zip}}     </span>\n        <span ng-show="data.address.city">   {{data.address.city}},   </span>\n        <span class="icon country country-{{data.address.country}}"></span>\n      </i>\n    </a>\n    <div class="single" ng-show="data.cart.length == 1">\n      <hr>\n      <div class="orderid">\n        <span translate="cart.order" class="title"></span> {{data.cart[0].idReservation}}\n      </div>\n      <mkm-order order="data.cart[0]" remove-article="removeArticle" shipping-method="shippingMethod"></mkm-order>\n    </div>\n    <div class="multiple" ng-show="data.cart.length > 1">\n      <div class="titlebar">\n        <a href="javascript:void()" ng-click="emptyCart()" class="right" translate="cart.delete">Empty cart</a>\n        <span translate="cart.headline" translate-values="{orders:data.cart.length, articles:count}"></span>\n      </div>\n      <ul>\n        <li class="order link" ng-repeat="order in data.cart">\n          <button class="remove" ng-click="removeOrder(order)"></button><a href="/cart/{{order.idReservation}}">\n            <span translate="cart.order"></span>\n            {{order.idReservation}}<br>\n            <span translate="cart.seller"></span>\n            {{order.seller.username}}<br>\n            {{order.articleCount}}\n            <span ng-show="order.articleCount == 1" translate="cart.article"></span>\n            <span ng-show="order.articleCount != 1" translate="cart.articles"></span>\n            {{order.articleValue | currency:"â‚¬"}}<br>\n            <span translate="cart.shipping"></span>\n            {{order.shippingMethod.price | currency:"â‚¬"}}\n          </a>\n        </li>\n      </ul>\n      <div class="total">\n        <span translate="common.total"></span> - {{sum | currency:"â‚¬"}}\n        <i translate="common.items_shipping"></i>\n      </div>\n    </div>\n    <div class="titlebar">\n      <span translate="cart.balance"></span>\n      {{data.balance | currency:"â‚¬"}}\n    </div>\n    <div class="payments" ng-show="data.balance < sum">\n      <a href="/cart/checkout/bank" class="button" translate="common.bank"></a>\n      <a href="/cart/checkout/paypal" class="button" translate="common.paypal"></a>\n    </div>\n    <div class="payments" ng-show="data.balance >= sum">\n      <a href="/cart/checkout/instabuy" class="button green" translate="common.instabuy"></a>\n    </div>\n  </div>\n  <div class="loading" ng-show="data.loading" translate="cart.loading"></div>\n</article>\n<mkm-footer cart="count"></mkm-footer>')}]),angular.module("/partials/pages/checkout.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/checkout.html",'<header>\n  <a href="/cart" class="back"></a>\n  <span translate="checkout.title"></span>\n</header>\n<article class="checkout">\n  <div ng-show="method == \'paypal\'" translate="checkout.paypal"></div>\n  <div ng-show="method == \'bank\'" translate="checkout.bank"></div>\n  <div ng-show="method == \'instabuy\'" translate="checkout.instabuy"></div>\n  <button ng-click="checkout()" class="button" translate="checkout.confirm"></button>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/contact.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/contact.html",'<header>\n  <a href="/settings" class="back"></a>\n  <span translate="titles.contact"></span>\n</header>\n<article>\n  <div class="subheadline" translate="contact.title">Imprint</div>\n  <p>\n    Sammelkartenmarkt Ltd. & Co. KG<br>\n    Nordkapstr. 4<br>\n    10439 Berlin<br>\n    <span translate="contact.telephone">Telephone:</span>\n    +49 30 34781236\n    (<span translate="contact.support">Not for customer support</span>)<br>\n    <span translate="contact.email">Email:</span>\n    <a href="mailto:contact@cardmarket.eu">contact@cardmarket.eu</a><br>\n    <br>\n    <b translate="contact.office">Registration office:</b> Amtsgericht Berlin-Charlottenburg<br>\n    <b translate="contact.number">Registration number:</b> HR A 39760<br>\n    <b translate="contact.tax">Sales tax identification number:</b> DE256122758<br>\n    <br>\n    <span translate="contact.legal"></span><br>\n    <br>\n    <b translate="contact.responsible">Responsible according to Â§ 55 Abs. 2 RStV (Germany):</b>\n    Dr. Matthias Knelangen, Nordkapstr. 4, 10439 Berlin<br>\n    <br>\n    <span translate="contact.trademark">MagiccardmarketÂ® is a registered trademark.</span>\n  </p>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/evaluate.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/evaluate.html",'<header>\n  <a href="." ng-href="/{{mode}}/{{data.order.idOrder}}" class="back"></a>\n  <span translate="evaluation.title" translate-values="{id:data.order.idOrder, seller:data.order.seller.username}">\n    Evaluation for Order 1 from Seller\n  </span>\n</header>\n<article class="evaluation">\n  <div class="error" ng-show="data.error" translate="order.error">Error loading order</div>\n  <div class="loading" ng-show="data.loading" translate="order.loading">Loading order...</div>\n\n  <!-- Evaluation form -->\n  <form ng-show="data.order && !data.order.evaluation && !data.loading && !data.error" ng-submit="evaluate()">\n    <label for="evaluationGrade" translate="evaluation.overall">Overall Evaluation</label><!--\n --><span class="icon evaluation" ng-class="\'evaluation-\'+evaluation.evaluationGrade"></span><!--\n --><select ng-options="evaluation as \'evaluation.evaluations.\'+evaluation | translate for evaluation in evaluations"\n            id="evaluationGrade" ng-model="evaluation.evaluationGrade" required></select>\n\n    <input type="text" ng-model="evaluation.comment" placeholder="{{\'common.comment\' | translate}}"\n           ng-required="evaluation.evaluationGrade > 1 && !evaluation.complaint.length">\n\n    <label for="itemDescription" translate="evaluation.description">Description of Items</label><!--\n --><span class="icon evaluation" ng-class="\'evaluation-\'+evaluation.itemDescription"></span><!--\n --><select ng-options="evaluation as \'evaluation.evaluations.\'+evaluation | translate for evaluation in evaluations"\n            id="itemDescription" ng-model="evaluation.itemDescription" required></select>\n\n    <label for="packaging" translate="evaluation.packaging">Packaging of Shipment</label><!--\n --><span class="icon evaluation" ng-class="\'evaluation-\'+evaluation.packaging"></span><!--\n --><select ng-options="evaluation as \'evaluation.evaluations.\'+evaluation | translate for evaluation in evaluations"\n            id="packaging" ng-model="evaluation.packaging" required></select>\n\n    <label for="speed" translate="evaluation.speed">Processing Speed</label><!--\n --><span class="icon evaluation" ng-class="\'evaluation-\'+evaluation.speed"></span><!--\n --><select ng-options="evaluation as \'evaluation.evaluations.\'+evaluation | translate for evaluation in evaluations"\n            id="speed" ng-model="evaluation.speed" required></select>\n\n    <label for="complaints" translate="evaluation.complaint">Complaints</label><!--\n --><select ng-options="complaint as \'evaluation.complaints.\'+complaint | translate for complaint in complaints"\n         id="complaints" ng-model="evaluation.complaint" multiple></select>\n\n    <button translate="order.evaluate" class="button">Evaluate</button>\n  </form>\n\n  <!-- Evaluation overlay -->\n  <div ng-show="!hideOverlay && data.order && !data.order.evaluation && !data.loading && !data.error" class="overlay ng-hide">\n    <div class="subheadline" translate="evaluation.guidelines">Evaluation Guidelines</div>\n    <ul>\n      <li translate="evaluation.guide1">Do not give an overall neutral or bad evaluation before trying to contact the seller first. Sellers are human and can make mistakes. Give them a chance to fix them.</li>\n      <li translate="evaluation.guide2">Do not give an overall neutral or bad evaluation if you would buy from this seller again.</li>\n      <li translate="evaluation.guide3">Do not give an overall neutral or bad evaluation if the seller made mistakes but fixed them.</li>\n      <li translate="evaluation.guide4">Do not give an overall neutral or bad evaluation if the packaging was not good but the items where unharmed.</li>\n      <li translate="evaluation.guide5">If you did not receive this shipment do not evaluate it. Contact our support so they mark it as lost.</li>\n      <li translate="evaluation.guide6">Mark or explain why you give overall neutral or bad evaluations, otherwise they will be neutralized.</li>\n    </ul>\n    <button class="button" ng-click="hideOverlay = true">{{\'evaluation.continue\' | translate}}</button>\n  </div>\n\n  <!-- Filled in evaluation -->\n  <div class="view" ng-show="data.order.evaluation">\n    <b translate="evaluation.overall">Overall:</b><!--\n    --><i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.evaluationGrade"></i><!--\n    --><span translate="evaluation.evaluations.{{data.order.evaluation.evaluationGrade}}"></span><br>\n\n    <div ng-show="data.order.evaluation.comment">\n      <b translate="evaluation.comment"></b><!--\n      --><span>{{data.order.evaluation.comment}}</span>\n    </div>\n\n    <b translate="evaluation.description">Item Description:</b><!--\n    --><i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.itemDescription"></i><!--\n    --><span translate="evaluation.evaluations.{{data.order.evaluation.itemDescription}}"></span><br>\n\n    <b translate="evaluation.packaging">Packaging:</b><!--\n    --><i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.packaging"></i><!--\n    --><span translate="evaluation.evaluations.{{data.order.evaluation.packaging}}"></span><br>\n\n    <b translate="evaluation.speed">Speed:</b><!--\n    --><i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.speed"></i><!--\n    --><span translate="evaluation.evaluations.{{data.order.evaluation.speed}}"></span><br>\n\n    <div ng-show="data.order.evaluation.complaint">\n      <b translate="evaluation.complaint">Complaints:</b><!--\n      --><span>\n        <i ng-repeat="complaint in data.order.evaluation.complaint">\n          {{\'evaluation.complaints.\'+complaint | translate}}{{$last ? \'\' : \', \'}}\n        </i>\n      </span>\n    </div>\n    <a href="/{{mode}}/{{data.order.idOrder}}" class="button" translate="evaluation.back">Back to Order</a>\n  </div>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/help.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/help.html",'<header>\n  <a href="/settings" class="back"></a>\n  <span translate="titles.help"></span>\n</header>\n<article>\n  <p translate="help.p1"></p>\n  <p translate="help.p2"></p>\n  <p translate="help.p3"></p>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/home.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/home.html",'<header></header>\n<article>\n  <span></span><a href="/stock" class="stock" translate="titles.stock">My Articles</a>\n  <span></span><a href="/buys" class="buys" translate="titles.buys">My Buys</a><!--\n  --><a href="/sells" class="sells" translate="titles.sells">My Sells</a>\n  <span></span><a href="/messages" class="messages" translate="titles.messages">My Messages</a>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/legal.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/legal.html",'<header>\n  <a href="/settings" class="back"></a>\n  <span translate="titles.legal">Legal</span>\n</header>\n<article>\n  Download\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/login.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/login.html",'<mkm-search></mkm-search>\n<article>\n  <form>\n    <img src="/img/logo.jpg" alt="Logo" class="logo" ng-hide="language == \'de\'">\n    <img src="/img/logo_de.jpg" alt="Logo" class="logo" ng-show="language == \'de\'">\n    <div ng-hide="loggedIn">\n      <iframe src="" ng-src="{{iframeSrc}}" ng-show="iframeSrc" scrolling="no"></iframe>\n      <button class="button" ng-hide="iframeSrc || login.success" ng-click="handleLogin()" translate="login.login">Log In</button>\n      <div ng-show="login.error" translate="login.error">Error retrieving access, please retry</div>\n      <div ng-show="login.success" translate="login.success">Logged in successfully!</div>\n    </div>\n    <div ng-show="loggedIn">\n      <button class="button" ng-click="logout()" translate="common.logout">Logout</button>\n    </div>\n  </form>\n</article>')}]),angular.module("/partials/pages/message.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/message.html",'<header ng-class="{loading:data.loading}">\n  <a href="/messages" class="back"></a>\n  {{data.partner.username}}\n  <span class="icons" mkm-user ng-show="data.partner" user="data.partner"></span>\n</header>\n<article>\n  <div class="search subheadline" ng-show="data.messages && data.messages.length">\n    <div class="left">\n      <input id="search" type="text" ng-model="search" placeholder="{{\'common.search\' | translate}}">\n    </div>\n    <div class="right">\n      <button ng-show="search" ng-click="search = \'\'">{{\'search.cancel\' | translate}}</button>\n    </div>\n  </div>\n  <ul class="thread" ng-class="{loading:data.loading}">\n    <li ng-repeat="message in data.messages | filter:search"\n        ng-class="{sending: message.isSending, unread: message.unread}">\n      <h3 ng-show="!$index || message.date.toDateString() != data.messages[$index - 1].date.toDateString()">\n        {{message.date | date:\'fullDate\'}}\n      </h3>\n      <div>\n        <button class="remove" ng-click="delete($index,data.partner.idUser,message.idMessage)"></button>\n        <span class="time">{{message.date | date:\'shortTime\'}}</span>\n        <p>{{message.text}}</p>\n      </div>\n    </li>\n  </ul>\n  <form class="subheadline" ng-submit="send()">\n    <div class="left">\n      <textarea placeholder="{{\'messages.message\' | translate}}" required ng-model="message"></textarea>\n    </div>\n    <div class="right">\n      <button translate="messages.send">Send</button>\n    </div>\n  </form>\n</article>\n<mkm-footer messages="unreadCount"></mkm-footer>')}]),angular.module("/partials/pages/messages.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/messages.html",'<header translate="titles.messages">My Messages</header>\n<article>\n  <div class="search subheadline">\n    <div class="left">\n      <input id="search" type="text" placeholder="{{\'common.search\' | translate}}" ng-model="search">\n    </div>\n    <div class="right">\n      <button ng-show="search" ng-click="search = \'\'">{{\'search.cancel\' | translate}}</button>\n    </div>\n  </div>\n  <ul class="overview" ng-class="{loading:data.loading}">\n    <li ng-repeat="thread in data.messages | filter:search" class="link"\n        ng-class="{sending:thread.message.isSending, unread:thread.unreadMessages}">\n      <button class="remove" ng-click="delete($index,thread.partner.idUser)"></button>\n      <span class="time">{{thread.message.date | date:\'short\'}}</span>\n      <a href="/messages/{{thread.partner.idUser}}">\n        <span class="title">\n          {{thread.partner.username}}\n          <span mkm-user user="thread.partner"></span>\n        </span>\n        <p>{{thread.message.text | truncate:150}}</p>\n      </a>\n    </li>\n    <li class="user" ng-repeat="user in users">\n      <a href="/messages/{{user.idUser}}">\n        <span class="title">\n          {{user.username}}\n          <span mkm-user user="user"></span>\n        </span>\n        <p translate="messages.new">Write a new message</p>\n      </a>\n    </li>\n  </ul>\n</article>\n<mkm-footer messages="unreadCount"></mkm-footer>')}]),angular.module("/partials/pages/order.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/order.html",'<header>\n  <a href="." class="back"></a>\n  <span translate="order.title">Order Nr.:</span>\n  {{data.order.idOrder || data.order.idReservation}}\n</header>\n<article>\n  <div class="error" ng-show="data.error" translate="order.error">Error loading order</div>\n  <div class="loading" ng-show="data.loading" translate="order.loading">Loading order...</div>\n\n  <mkm-order ng-hide="data.loading || data.error" remove-article="removeArticle"\n             shipping-method="shippingMethod" order="data.order"></mkm-order>\n\n  <form class="order" ng-show="data.order.state && !data.loading && !data.error">\n    <div class="titlebar" translate="order.status">Status:</div>\n    <div class="status">\n      <div ng-show="data.order.state.dateBought">\n        <b translate="order.purchased">Purchased:</b><span>{{data.order.state.dateBought | date:\'short\'}}</span>\n      </div>\n      <div ng-show="data.order.state.datePaid">\n        <b translate="order.paid">Paid:</b><span>{{data.order.state.datePaid | date:\'short\'}}</span>\n      </div>\n      <div ng-show="data.order.state.dateSent">\n        <b translate="order.sent">Sent:</b><span>{{data.order.state.dateSent | date:\'short\'}}</span>\n      </div>\n      <div ng-show="data.order.state.dateReceived">\n        <b translate="order.received">Received:</b><span>{{data.order.state.dateReceived | date:\'short\'}}</span>\n      </div>\n      <div ng-show="data.order.state.reason && !data.order.showReason">\n        <b translate="order.reason">Reason:</b><span>{{data.order.state.reason}}</span>\n      </div>\n      <div class="cancellation" ng-show="data.order.cancellationRequest">\n        <b translate="order.cancellation">Cancellation requested on</b><span>{{data.order.cancellationRequest.date | date:\'short\'}}</span><br>\n        <b translate="order.reason">Reason:</b><span>{{data.order.cancellationRequest.reason}}</span>\n        <div ng-show="data.order.cancellationRequest.rejected">\n          <b translate="order.rejected">Cancellation has been rejected</b><span></span>\n          <b translate="order.reason">Reason:</b><span>{{data.order.cancellationRequest.rejectAnswer}}</span>\n        </div>\n      </div>\n      <b translate="order.status">Status:</b><span>{{\'order.statuses.\'+data.order.state.state | translate}}</span>\n      <div ng-show="data.order.showReason">\n        <textarea ng-model="data.order.state.reason" ng-required="data.order.showReason"></textarea>\n      </div>\n    </div>\n\n    <div ng-show="data.order.state.state == \'bought\' && !data.order.cancellationRequest">\n      <button class="button" ng-click="update(\'requestCancellation\')" translate="order.cancel">Request Cancellation</button>\n    </div>\n    <div ng-show="data.order.state.state == \'paid\' && !data.order.cancellationRequest">\n      <button class="button" ng-click="update(\'requestCancellation\')" translate="order.cancel">Request Cancellation</button>\n    </div>\n    <div ng-show="data.order.state.state == \'sent\'  && data.order.isBuyer">\n      <button class="button" ng-click="update(\'confirmReception\')" translate="order.confirm">Confirm Reception</button>\n    </div>\n    <div ng-show="data.order.state.state == \'paid\' && !data.order.isBuyer">\n      <button class="button" ng-click="update(\'send\')" translate="order.mark">Mark as sent</button>\n    </div>\n    <div ng-show="data.order.state.state == \'received\' && data.order.isBuyer">\n      <a class="button" href="/buys/{{data.order.idOrder}}/evaluate" translate="order.evaluate">Evaluate order</a>\n    </div>\n\n    <div class="titlebar" ng-show="data.order.evaluation" translate="order.evaluation">Evaluation:</div>\n    <div class="evaluation" ng-show="data.order.evaluation">\n      <b translate="evaluation.overall">Overall</b><span>\n        <i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.evaluationGrade"></i>\n      </span>\n      <div ng-show="data.order.evaluation.comment">\n        <b translate="evaluation.comment">Comment</b><span>{{data.order.evaluation.comment}}</span>\n      </div>\n      <b translate="evaluation.description">Item Description</b><span>\n        <i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.itemDescription"></i>\n      </span>\n      <b translate="evaluation.packaging">Packaging</b><span>\n        <i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.packaging"></i>\n      </span>\n      <b translate="evaluation.speed">Speed</b><span>\n        <i class="icon evaluation" ng-class="\'evaluation-\'+data.order.evaluation.speed"></i>\n      </span>\n      <div ng-show="data.order.evaluation.complaint">\n        <b translate="evaluation.complaint">Complaints</b><span>\n          <i ng-repeat="complaint in data.order.evaluation.complaint">\n'+"            {{'evaluation.complaints.'+complaint | translate}}{{$last ? '' : ', '}}\n          </i>\n        </span>\n      </div>\n    </div>\n  </form>\n</article>\n<mkm-footer cart=\"count\"></mkm-footer>")}]),angular.module("/partials/pages/orders.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/orders.html",'<header>\n  <span ng-show="mode == \'buys\'" translate="titles.buys">My Buys</span>\n  <span ng-show="mode == \'sells\'" translate="titles.sells">My Sells</span>\n</header>\n<article>\n  <ul class="tabs">\n    <li ng-class="{current:tab==\'bought\'}" ng-click="tab = \'bought\'">\n      <span translate="order.statuses.bought">Unpaid</span>\n    </li><li ng-class="{current:tab==\'paid\'}" ng-click="tab = \'paid\'">\n      <span translate="order.statuses.paid">Paid</span>\n    </li><li ng-class="{current:tab==\'sent\'}" ng-click="tab = \'sent\'">\n      <span translate="order.statuses.sent">Sent</span>\n    </li><li ng-class="{current:tab==\'received\'}" ng-click="tab = \'received\'">\n      <span translate="order.statuses.received">Received</span>\n    </li>\n  </ul>\n  <div class="orders">\n    <h3 ng-show="!data.loading && data.count > 1" translate="order.shipments" translate-value-count="{{data.count | number}}"></h3>\n    <h3 ng-show="!data.loading && data.count == 1" translate="order.shipments_1"></h3>\n    <h3 ng-show="!data.loading && data.count == 0" translate="order.shipments_0"></h3>\n    <ul ng-class="{loading:data.loading}" data-infinite-scroll="loadOrders()">\n      <li ng-repeat="order in data.orders">\n        <a class="link" href="/{{mode}}/{{order.idOrder}}">\n          <div ng-show="mode == \'buys\'">\n            <b class="title" translate="order.seller">Seller:</b>\n            <b class="title">{{order.seller.username}}</b><br>\n            <span translate="order.last_name">Last name:</span>\n            {{order.seller.name.lastName}}\n          </div>\n          <div ng-show="mode == \'sells\'">\n            <b class="title" translate="order.buyer">Buyer:</b>\n            <b class="title">{{order.buyer.username}}</b><br>\n            <span translate="order.last_name">Last name:</span>\n            {{order.buyer.name.lastName}}\n          </div>\n\n          <span ng-show="order.state.dateBought">\n            <b translate="order.purchased">Purchased:</b> {{order.state.dateBought | date:\'short\'}}<br>\n          </span>\n          <span ng-show="order.state.datePaid">\n            <b translate="order.paid">Paid:</b> {{order.state.datePaid | date:\'short\'}}<br>\n          </span>\n          <span ng-show="order.state.dateSent">\n            <b translate="order.sent">Sent:</b> {{order.state.dateSent | date:\'short\'}}<br>\n          </span>\n          <span ng-show="order.state.dateReceived">\n            <b translate="order.received">Received:</b>\n            {{order.state.dateReceived | date:\'short\'}}<br>\n          </span>\n          <span ng-show="order.cancellationRequest">\n            <b translate="order.cancellation">Cancellation Requested:</b>\n            {{order.cancellationRequest.date | date:\'short\'}}<br>\n          </span>\n          <b ng-show="order.state.state == \'received\'" translate="order.please_evaluate">Please evaluate this order</b>\n        </a>\n      </li>\n    </ul>\n  </div>\n  <div class="outstanding" ng-show="data.account.bankRecharge">\n    <hr>\n    <span translate="order.outstanding" translate-value-sum="{{data.account.bankRecharge | currency:\'â‚¬\'}}"></span><br>\n    <a href="/payment/bank" translate="common.bank">Bank Transfer</a>\n    <a href="/payment/paypal" translate="common.paypal">Paypal</a>\n  </div>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/payment.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/payment.html",'<header translate="titles.payment">Payment</header>\n<article>\n  <div ng-show="method == \'done\'">\n    <span translate="payment.done">Thank you for your payment!</span><br>\n    <a href="javascript:window.close();" translate="payment.close">You can now close this tab</a>.\n  </div>\n  <div ng-show="method == \'cancel\'">\n    <span translate="payment.cancel">Your Paypal account has not been charged.</span><br>\n    <a href="javascript:window.close();" translate="payment.close">You can now close this tab</a>.\n  </div>\n  <div ng-show="method == \'paypal\'">\n    <div class="loading" ng-show="data.loading" translate="payment.loading">Loading payment data...</div>\n    <div class="headline" translate="payment.paypal">Credit my Account via PayPal</div>\n    <span translate="payment.paypal_p1"></span><br>\n    <span translate="payment.paypal_p2"></span><br>\n    <span translate="payment.alternate">Alternate Method:</span>\n    <a href="/payment/bank" translate="payment.bank">Credit your account via bank transfer</a><br>\n    <span translate="payment.paypal_p3">Total amount for PayPal:</span>\n    <b>{{data.account.paypalRecharge | currency:"â‚¬"}}</b>\n    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">\n      <input type="hidden" name="cmd" value="_xclick">\n      <input type="hidden" name="business" value="paypal@magickartenmarkt.de">\n      <input type="hidden" name="item_name" value="Digital Goods">\n      <input type="hidden" name="custom" value="{{data.account.idUser}}">\n      <input type="hidden" name="amount" value="{{data.account.paypalRecharge}}">\n      <input type="hidden" name="currency_code" value="EUR">\n      <input type="hidden" name="return" value="{{location.protocol()}}://{{location.host()}}/payment/done">\n      <input type="hidden" name="cancel_return" value="{{location.protocol()}}://{{location.host()}}/payment/cancel">\n      <input type="hidden" name="rm" value="2">\n      <input type="hidden" name="lc" value="{{data.account.idDisplayLanguage | findInMap:languages}}">\n      <input type="hidden" name="image_url" value="http://mkmapi.eu/img/localisation/english/banner_750_90.png">\n      <button ng-click="redirect()" translate="payment.paypal_p4">Pay with Paypal</button>\n    </form>\n  </div>\n  <div ng-show="method == \'bank\'">\n    <div class="loading" ng-show="data.loading" translate="payment.loading">Loading payment data...</div>\n    <div class="headline" translate="payment.bank">Credit my Account via Bank Transfer</div>\n    <span translate="payment.bank_p1"></span>\n    <ul>\n      <li><b translate="payment.bank_p2">Bank Account</b></li>\n      <li><b translate="payment.bank_p3">Amount:</b> {{data.account.bankRecharge | currency:"â‚¬"}}</li>\n      <li><b translate="payment.bank_p4">Recipient:</b> Sammelkartenmarkt</li>\n      <li><b translate="payment.bank_p5">Account Nr:</b> 107541500</li>\n      <li><b translate="payment.bank_p6">Bank:</b> Commerzbank AG</li>\n      <li><b translate="payment.bank_p7">Bank Code:</b> 10040000</li>\n      <li><b translate="payment.bank_p8">IBAN:</b> DE80100400000107541500</li>\n      <li><b translate="payment.bank_p9">BIC:</b> COBADEFFXXX</li>\n      <li><b translate="payment.bank_p10">Transfer Reason:</b> {{data.account.username}}-{{data.account.idUser}}</li>\n    </ul>\n    <b translate="payment.bank_p11">Attention:</b>\n    <span translate="payment.bank_p12" translate-value-user="{{data.account.username+\'-\'+data.account.idUser}}"></span><br>\n    <span translate="payment.bank_p13"></span><br>\n    <b translate="payment.bank_p11">Atention:</b>\n    <span translate="payment.bank_p14"></span><br>\n    <span translate="payment.bank_p15"></span><br>\n    <span translate="payment.alternate">Alternate Method:</span>\n    <a href="/payment/paypal" translate="payment.paypal">Credit your account via PayPal</a><br>\n  </div>\n</article>\n<mkm-footer ng-hide="method == \'done\' || method == \'cancel\'"></mkm-footer>')
}]),angular.module("/partials/pages/product.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/product.html",'<header ng-class="{loading:productData.loading}">\n  <a href="javascript:history.back()" class="back"></a>\n  <span class="error ng-hide" ng-show="productData.error" translate="product.error">Error loading product</span>\n  {{productData.product.name[0].productName}}\n  <span ng-show="productData.product.number" translate="product.nr" translate-value-number="{{productData.product.number}}"></span>\n  <div class="box">\n    <span ng-show="productData.product.rarity" class="icon rarity rarity-{{productData.product.rarity}}"></span>\n    <span class="icon expansion" ng-style="productData.product.expIcon | expansionIcon" ng-show="productData.product.expansion"></span>\n  </div>\n</header>\n<mkm-product product-data="productData"></mkm-product>\n<article>\n  <span ng-show="data.error" class="error" translate="product.articles_error">Error loading articles</span>\n  <span ng-show="!data.loading && !data.count && !data.error" translate="product.no_articles">No Offers :(</span>\n  <ul class="table" ng-class="{loading:data.loading}" data-infinite-scroll="loadArticles()">\n    <li class="row" ng-repeat="article in data.articles track by article.idArticle"\n        ng-hide="!article.count" ng-class="{comment:article.showComment, seller:article.showSeller}">\n      <div class="cell seller" ng-click="article.showSeller=!article.showSeller">\n        <span class="name">{{article.seller.username}} ({{article.seller.sellCount}})</span>\n        <span class="details" mkm-user user="article.seller"></span>\n      </div><div class="cell icons">\n        <span class="icon language language-{{article.language.idLanguage}}"></span>\n        <span class="icon grading grading-{{article.condition}}"></span>\n        <span class="icon is-foil" ng-show="article.isFoil"></span>\n        <span class="icon is-signed" ng-show="article.isSigned"></span>\n        <span class="icon is-altered" ng-show="article.isAltered"></span>\n        <span class="icon comment" ng-show="article.comments" ng-click="article.showComment = !article.showComment"></span>\n        <div class="comment">{{article.comments}}</div>\n      </div><div class="cell price" ng-class="{playset: article.isPlayset}">\n        <span class="icon is-playset" ng-click="article.showPlayset=!article.showPlayset"></span>\n        <span class="price" ng-click="article.showPlayset=true" ng-hide="article.showPlayset && article.isPlayset">\n          {{article.price | currency:"â‚¬"}}\n        </span>\n        <span class="price-per-card" ng-click="article.showPlayset=false" ng-show="article.showPlayset && article.isPlayset">\n          4x{{article.price / 4 | currency:"â‚¬"}}\n        </span>\n        <span class="count">{{article.count}}</span>\n        <button ng-click="addToCart(article)"></button>\n      </div>\n    </li>\n  </ul>\n</article>\n<mkm-footer cart="cart"></mkm-footer>')}]),angular.module("/partials/pages/search.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/search.html",'<header translate="titles.search">Search</header>\n<article>\n  <mkm-search></mkm-search>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/settings.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/settings.html",'<header translate="titles.settings">Settings</header>\n<article>\n  <ul>\n    <li>\n      <input type="checkbox" class="right" id="vacation" ng-change="updateVacation()" ng-model="data.account.onVacation">\n      <label for="vacation" class="right" ng-show="data.account.onVacation" translate="settings.on">On</label>\n      <label for="vacation" class="right" ng-hide="data.account.onVacation" translate="settings.off">Off</label>\n      <label for="vacation" translate="settings.vacation">MKM Vacation Status</label>\n    </li>\n    <li>\n      <select class="right" id="languages"\n              ng-options="language as \'common.languages.\'+language | translate for language in languages"\n              ng-model="data.account.idDisplayLanguage" ng-change="updateLanguage()"></select>\n      <label for="languages" translate="common.language">Language</label>\n    </li>\n    <li class="link"><a href="/help" translate="titles.help">Help & About</a></li>\n    <li class="link"><a href="/contact" translate="titles.contact">Contact Us</a></li>\n    <li class="link"><a href="//www.magiccardmarket.eu/terms_{{language}}.pdf" target="_blank" translate="titles.legal">Legal</a></li>\n    <li class="center"><button class="button" ng-click="logout()" translate="common.logout">Logout</button></li>\n  </ul>\n</article>\n<mkm-footer></mkm-footer>')}]),angular.module("/partials/pages/stock.html",[]).run(["$templateCache",function(a){a.put("/partials/pages/stock.html",'<header>\n  <span translate="titles.stock">My Articles</span>\n  <span ng-hide="data.loading">\n    - {{data.count}}\n    <span ng-show="data.count != 1" translate="common.articles"></span>\n    <span ng-show="data.count == 1" translate="common.article"></span>\n  </span>\n</header>\n<article>\n  <div class="search subheadline">\n    <div class="tools" ng-show="selected.length">\n      <button class="remove" ng-click="decrease(selected)"></button>\n      <button class="add" ng-click="increase(selected)"></button>\n    </div>\n    <div class="left">\n      <input type="text" ng-model="query" placeholder="{{\'common.search\' | translate}}">\n    </div>\n    <div class="right">\n      <button ng-show="query" ng-click="query = \'\'">{{\'search.cancel\' | translate}}</button>\n    </div>\n  </div>\n  <div ng-show="data.error" class="error" translate="stock.error">No Articles</div>\n  <div ng-show="!data.loading && !data.count && !data.error" class="empty" translate="stock.no_articles">No Articles</div>\n  <ul class="articles" ng-class="{loading:data.loading}" data-infinite-scroll="loadArticles()">\n    <li ng-repeat="article in data.articles" ng-hide="!article.count"\n        ng-class="{loading:article.loading,comment:article.showComment,image:article.showImage}">\n      <div class="controls">\n        <input type="checkbox" ng-checked="selected.indexOf(article) > -1" ng-click="select(article)">\n        <span class="icon card" ng-show="article.product.image" ng-click="article.showImage = !article.showImage"></span>\n      </div>\n      <div class="card">\n        {{article.count}}x\n        <a href="/stock/{{article.idArticle}}">{{article.product.name}}</a>\n        <div class="card-image" ng-click="article.showImage = 0">\n          <img src="" ng-src="{{article.showImage && article.product.image | productImage}}">\n        </div>\n        <div class="comment" ng-click="article.showComment = 0">{{article.comments}}</div>\n      </div>\n      <div class="icons">\n        <span class="icon rarity rarity-{{article.product.rarity}}" ng-show="article.product.rarity"></span>\n        <span class="icon expansion" ng-style="article.product.expIcon | expansionIcon" ng-show="article.product.expansion"></span>\n        <span class="icon language language-{{article.language.idLanguage}}" ng-show="article.language.idLanguage"></span>\n        <span class="icon grading grading-{{article.condition}}" ng-show="article.condition"></span>\n        <span class="icon is-foil" ng-show="article.isFoil"></span>\n        <span class="icon is-signed" ng-show="article.isSigned"></span>\n        <span class="icon is-playset" ng-show="article.isPlayset"></span>\n        <span class="icon is-altered" ng-show="article.isAltered"></span>\n        <span class="icon comment" ng-show="article.comments" ng-click="article.showComment = !article.showComment"></span>\n      </div>\n      <div class="price">{{article.price | currency:"â‚¬"}}</div>\n    </li>\n  </ul>\n</article>\n<mkm-footer cart="count"></mkm-footer>')}]),mkmobileServices.factory("MkmApi",["$resource",function(a){var b,c,d,e,f,g;d={consumerKey:"alb03sLPpFNAhi6f",consumerSecret:"HTIcbso87X22JdS3Yk89c2CojfZiNDMX",token:sessionStorage.getItem("token")||"",secret:sessionStorage.getItem("secret")||""},c="https://sandbox.mkmapi.eu/ws/v1.1",b={search:{params:{type:"products",param2:"1",param3:"1",param4:"false"},unique:"search",cache:!0},articles:{params:{type:"articles"}},product:{params:{type:"product"},cache:!0},access:{params:{type:"access"},method:"POST"},user:{params:{type:"user",param1:"find"},cache:!0,unique:"user"},cart:{params:{type:"shoppingcart"}},cartUpdate:{params:{type:"shoppingcart"},method:"PUT"},cartEmpty:{params:{type:"shoppingcart"},method:"DELETE"},shippingAddress:{params:{type:"shoppingcart",param1:"shippingaddress"},method:"PUT"},shippingMethod:{params:{type:"shoppingcart",param1:"shippingmethod"}},shippingMethodUpdate:{params:{type:"shoppingcart",param1:"shippingmethod",param2:"@orderId"},method:"PUT"},checkout:{params:{type:"shoppingcart",param2:"checkout"}},stock:{params:{type:"stock"}},stockSearch:{params:{type:"stock",param1:"articles",param3:"1"},unique:"searchStock"},stockUpdate:{params:{type:"stock",param1:"@action"},method:"PUT"},orders:{params:{type:"orders"},unique:"order"},order:{params:{type:"order"}},orderUpdate:{params:{type:"order"},method:"PUT"},orderEvaluate:{params:{type:"order",param1:"@orderId",param2:"evaluation"},method:"POST"},account:{params:{type:"account"}},accountVacation:{params:{type:"account",param1:"vacation",param2:"@vacation"},method:"PUT"},accountLanguage:{params:{type:"account",param1:"language",param2:"@languageId"},method:"PUT"},messages:{params:{type:"account",param1:"messages"}},messageSend:{params:{type:"account",param1:"messages",param2:"@param2"},method:"POST"},messageDelete:{params:{type:"account",param1:"messages"},method:"DELETE"}};for(f in b)e=b[f],b[f].oauth=d,("PUT"===(g=e.method)||"POST"===g)&&(b[f].headers={"Content-type":"application/xml"});return{api:a(c+"/output.json/:type/:param1/:param2/:param3/:param4/:param5",{},b),auth:d,url:c+"/authenticate/"}}]),mkmobileServices.factory("MkmApiAuth",["MkmApi","$location","DataCache","tmhDynamicLocale","$translate",function(a,b,c,d,e){var f,g;return g="/",f={},{isLoggedIn:function(){return""!==a.auth.secret},getLoginURL:function(){return a.url+a.auth.consumerKey},logout:function(){return a.auth.secret=a.auth.token="",sessionStorage.removeItem("secret"),sessionStorage.removeItem("token"),sessionStorage.removeItem("search"),c.reset(),b.path("/login")},checkLogin:function(){var a;return a=!0,this.isLoggedIn()&&"/login"!==b.path()||(g=b.path(),sessionStorage.removeItem("search"),b.path("/login"),a=!1),a},getAccess:function(c){var d,e;return e={},null!=c&&(a.auth.token=c),d={app_key:a.auth.consumerKey,request_token:a.auth.token},a.api.access(d,function(c){return function(d){return d.oauth_token&&d.oauth_token_secret?(a.auth.token=d.oauth_token,a.auth.secret=d.oauth_token_secret,sessionStorage.setItem("token",a.auth.token),sessionStorage.setItem("secret",a.auth.secret),c.cache(d.account),e.success=!0,b.path(g)):void 0}}(this),function(){return e.error=!0}),e={}},getAccount:function(b){var d;return d={account:c.account()},null==d.account?(d.loading=!0,f.account=(f.account||a.api.account().$promise).then(function(a){return function(c){return d.account=a.cache(c.account),d.loading=!1,"function"==typeof b&&b(d),c}}(this),function(a){return function(b){return 403===b.status?a.logout():void 0}}(this))):"function"==typeof b&&b(d),d},setVacation:function(b){return a.api.accountVacation({vacation:b},function(a){return function(b){return a.cache(b.account)}}(this))},setLanguage:function(b){return a.api.accountLanguage({languageId:b},function(a){return function(b){return a.cache(b.account)}}(this))},cache:function(a){var b,f,g,h;for(h=this.getLanguageCodes(),f=0,g=h.length;g>f;f++)b=h[f],b.value===a.idDisplayLanguage&&e.use()!==b.label&&(d.set(b.label.replace(/_/,"-").toLowerCase()),e.use(b.label));return c.cartCount(a.articlesInShoppingCart),c.messageCount(a.unreadMessages),c.balance(a.accountBalance),c.account(a)},getLanguages:function(){return[1,2,3,4,5]},getLanguageCodes:function(){return[{value:1,label:"en_GB"},{value:2,label:"fr_FR"},{value:3,label:"de_DE"},{value:4,label:"es_ES"},{value:5,label:"it_IT"}]}}}]),mkmobileServices.factory("DataCache",["$cacheFactory",function(a){var b;return b={product:a("products",{capacity:500}),article:a("article",{capacity:1e3}),cart:a("cart",{capacity:1}),account:a("account",{capacity:10}),order:a("order",{capacity:1e3})},{reset:function(){var a,c,d;d=[];for(c in b)a=b[c],d.push(a.removeAll());return d},product:function(a,c){return null!=c&&b.product.put(a,c),null!=a?b.product.get(a):void 0},article:function(a,c){return null!=c&&b.article.put(a,c),c===!1&&b.article.remove(a),null!=a?b.article.get(a):void 0},cart:function(a){return null!=a&&b.cart.put("cart",a),b.cart.get("cart")},account:function(a){return null!=a&&b.account.put("account",a),b.account.get("account")},balance:function(a){return null!=a&&b.account.put("balance",a),b.account.get("balance")},cartCount:function(a){return null!=a&&b.account.put("articlesInShoppingCart",a),b.account.get("articlesInShoppingCart")},messageCount:function(a){return null!=a&&b.account.put("unreadMessages",a),b.account.get("unreadMessages")},address:function(a){return null!=a&&b.account.put("address",a),b.account.get("address")},order:function(a,c){return null!=c&&b.order.put(a,c),null!=a?b.order.get(a):void 0}}}]),mkmobileServices.factory("MkmApiCart",["MkmApi","DataCache","$filter",function(a,b,c){return{get:function(c,d){var e,f,g,h,i;if(f={cart:b.cart(),address:b.address(),balance:b.balance(),account:b.account()},null==f.cart)f.loading=!0,a.api.cart({},function(a){return function(e){var g,h,i,j;if(a.cache(e),f.loading=!1,f.account=b.account(),f.balance=b.balance(),f.cart=b.cart(),f.address=b.address(),null!=c)for(j=f.cart,h=0,i=j.length;i>h;h++)g=j[h],g.idReservation===parseInt(c,10)&&(f.order=g);return a.getShippingMethods(f),"function"==typeof d?d(f):void 0}}(this),function(){return function(a){return f.error=a,f.loading=!1}}(this));else{if(null!=c)for(i=f.cart,g=0,h=i.length;h>g;g++)e=i[g],e.idReservation===parseInt(c,10)&&(f.order=e);this.getShippingMethods(f),"function"==typeof d&&d(f)}return f},getShippingMethods:function(b){var d,e;if(1===b.cart.length||null!=b.order)return d=function(a){return{value:a.idShippingMethod,label:a.name+" - "+c("currency")(a.price,"â‚¬"),group:a.isInsured?"insured":"uninsured"}},e=b.order||b.cart[0],e.shippingMethods=[d(e.shippingMethod)],a.api.shippingMethod({param2:e.idReservation},function(a){var b,c,f,g,h;for(e.shippingMethods=[],g=a.availableMethod,h=[],c=0,f=g.length;f>c;c++)b=g[c],h.push(e.shippingMethods.push(d(b)));return h})},count:function(){var a,c,d,e,f;if(null!=b.cart()){for(a=0,f=b.cart(),d=0,e=f.length;e>d;d++)c=f[d],a+=parseInt(c.articleCount,10);b.cartCount(a)}return b.cartCount()},sum:function(){var a,c,d,e,f;if(c=0,null!=b.cart())for(f=b.cart(),d=0,e=f.length;e>d;d++)a=f[d],c+=a.totalValue;return c},add:function(b,c){var d;return d={action:"add",article:{idArticle:b,amount:1}},a.api.cartUpdate(d,function(a){return function(b){return a.cache(b),"function"==typeof c?c():void 0}}(this))},remove:function(b,c){var d,e,f;if(f={action:"remove"},"object"==typeof b){f.article=[];for(e in b)d=b[e],f.article.push({idArticle:e,amount:d})}else f.article={idArticle:b,amount:1};return a.api.cartUpdate(f,function(a){return function(b){return a.cache(b),"function"==typeof c?c():void 0}}(this))},empty:function(){return a.api.cartEmpty({},function(a){return a||(a={}),a.shoppingCart||(a.shoppingCart=[]),this.cache(a)})},cache:function(a){return b.cart(a.shoppingCart),null!=a.account&&(b.account(a.account),b.balance(a.account.accountBalance)),b.address(a.shippingAddress)},checkout:function(c){return a.api.checkout({},function(a){var d,e,f,g;for(g=a.order,e=0,f=g.length;f>e;e++)d=g[e],b.order(d.idOrder,d);return b.cart([]),null!=a.account&&(b.account(a.account),b.balance(a.account.accountBalance)),"function"==typeof c?c():void 0})},shippingAddress:function(b,c){return a.api.shippingAddress(b,function(a){return function(b){return a.cache(b),"function"==typeof c?c():void 0}}(this))},shippingMethod:function(b){var c;return c={orderId:b.idReservation,idShippingMethod:b.shippingMethod.idShippingMethod},a.api.shippingMethodUpdate(c,function(a){return function(c){var d,e,f,g,h;for(a.cache(c),h=c.shoppingCart,f=0,g=h.length;g>f;f++)e=h[f],e.idReservation===b.idReservation&&(d=e);return b.shippingMethod=d.shippingMethod,b.totalValue=d.totalValue}}(this))},getCountries:function(){return["AT","BE","BG","CH","CY","CZ","D","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK"]}}}]),mkmobileServices.factory("MkmApiMarket",["MkmApi","DataCache",function(a,b){return{search:function(c,d){return null==d&&(d={count:0,products:[]}),c=c.replace(/[^a-z0-9 ]/gi,""),c&&(d.loading=!0,a.api.search({param1:c,param5:d.products.length+1},function(){return function(a){var c,e;return null!=(c=a.product)&&c.map(function(a){return b.product(a.idProduct,a)}),d.count=a._range||(null!=(e=a.product)?e.length:void 0),d.count&&(d.products=d.products.concat(a.product)),d.loading=!1}}(this),function(a){return d.error=a,d.loading=!1})),d},product:function(c){var d;return d={product:b.product(c)},(null==d.product||null==d.product.reprint&&d.product.countReprints>1)&&(d.loading=!0,a.api.product({param1:c},function(a){return d.product=b.product(c,a.product),d.loading=!1},function(a){return d.error=a,d.loading=!1})),d},articles:function(b,c){return null==c&&(c={count:0,articles:[]}),c.loading=!0,a.api.articles({param1:b,param2:c.articles.length+1},function(a){var b;return c.count=a._range||(null!=(b=a.article)?b.length:void 0),c.count&&(c.articles=c.articles.concat(a.article)),c.loading=!1},function(a){return c.error=a,c.loading=!1}),c}}}]),mkmobileServices.factory("MkmApiMessage",["MkmApi","DataCache",function(a,b){return{get:function(c,d){var e;return e={messages:[],count:0,loading:!0},a.api.messages({param2:c},function(a){var f,g,h,i,j,k,l,m,n,o,p;if(null!=c){for(h=b.messageCount(),m=a.message,i=0,k=m.length;k>i;i++)f=m[i],f.unread&&h--,f.date=new Date(f.date);b.messageCount(h),e.count=a._range||(null!=(n=a.message)?n.length:void 0),e.count&&(e.messages=e.messages.concat(a.message)),e.partner=a.partner,"function"==typeof d&&d()}else{for(e.count=a._range||(null!=(o=a.thread)?o.length:void 0),e.count&&(e.messages=e.messages.concat(a.thread)),h=0,p=e.messages,j=0,l=p.length;l>j;j++)g=p[j],h+=g.unreadMessages;b.messageCount(h),"function"==typeof d&&d()}return e.loading=!1},function(a){return e.loading=!1,e.error=a.error}),e},send:function(b,c,d){return null==d&&(d={messages:[],count:0}),b&&c?(d.loading=!0,a.api.messageSend({param2:b,message:c},function(a){var b,e,f,g,h;for(d.loading=!1,d.count=a._range||(null!=(f=a.message)?f.length:void 0),d.messages=a.message,d.partner=a.partner,g=d.messages,h=[],b=0,e=g.length;e>b;b++)c=g[b],h.push(c.date=new Date(c.date));return h},function(a){return d.loading=!1,d.error=a.error})):void 0},"delete":function(b,c){return a.api.messageDelete({param2:b,param3:c})},findUser:function(b,c){return b?a.api.user({param2:b},function(a){return c(a.user)},function(){return c([])}):c([])},count:function(){return b.messageCount()}}}]),mkmobileServices.factory("MkmApiOrder",["MkmApi","MkmApiAuth","DataCache",function(a,b,c){var d,e;return d={sells:1,buys:2},e={bought:1,paid:2,sent:4,received:8,lost:32,cancelled:128},{get:function(f){var g,h,i,j,k;return g=f.mode,k=f.status,h=f.orderId,j=f.response,null!=h?(j={order:c.order(h)},null==j.order&&(j.loading=!0,a.api.order({param1:h},function(){return function(a){return j.loading=!1,j.order=c.order(h,a.order)}}(this),function(a){return j.error=a,j.loading=!1}))):(null==j&&(j={count:0,orders:[]}),i={param2:d[g]||1,param3:e[k]||1,param4:j.orders.length+1},j.loading=!0,a.api.orders(i,function(){return function(a){var d;return j.count=a._range||(null!=(d=a.order)?d.length:void 0),j.count&&(j.orders=j.orders.concat(a.order.map(function(a){return c.order(a.idOrder,a)}))),j.loading=!1,"buys"===g&&"bought"===k&&j.orders.length?b.getAccount(function(){return j.account=c.account()}):void 0}}(this),function(a){return j.error=a,j.loading=!1})),j},update:function(b,d){var e,f,g,h;return e=b.orderId,h=b.status,f=b.reason,g={action:h},null!=f&&(g.reason=f),a.api.orderUpdate({param1:e},g,function(a){return c.order(e,a.order),"function"==typeof d?d():void 0}),!1},evaluate:function(b,d,e){return d.orderId=b,a.api.orderEvaluate(d,function(a){return c.order(b,a.order),"function"==typeof e?e():void 0}),!1},getEvaluation:function(){return{evaluationGrade:1,itemDescription:1,packaging:1,speed:1,complaint:[],comment:""}},getComplaints:function(){return["badCommunication","incompleteShipment","notFoil","rudeSeller","shipDamage","unorderedShipment","wrongEd","wrongLang"]},getEvaluations:function(){return[1,2,3,4]}}}]),mkmobileServices.factory("MkmApiStock",["MkmApi","MkmApiMarket","DataCache",function(a,b,c){return{get:function(d,e){return null!=d?(e={article:c.article(d)},null==e.article?(e.loading=!0,a.api.stock({param1:"article",param2:d},function(){return function(a){return e.article=c.article(d,a.article),e.loading=!1,e.product={product:c.product(a.product.idProduct,a.product)}}}(this),function(){return e.error=!0,e.loading=!1})):e.product=b.product(e.article.idProduct)):(null==e&&(e={count:0,articles:[]}),e.loading=!0,a.api.stock({param1:e.articles.length+1},function(){return function(a){var b;return e.count=a._range||(null!=(b=a.article)?b.length:void 0),e.count&&(e.articles=e.articles.concat(a.article.map(function(a){return c.article(a.idArticle,a)}))),e.loading=!1}}(this),function(){return e.error=!0,e.loading=!1})),e},update:function(b,d){var e;return e={article:{idArticle:b.idArticle,idLanguage:b.language.idLanguage,comments:b.comments,count:b.amount||b.count,price:b.price,condition:b.condition,isFoil:b.isFoil,isSigned:b.isSigned,isAltered:b.isAltered,isPlayset:b.isPlayset}},a.api.stockUpdate(e,function(){return function(a){var e;return(null!=(e=a.updatedArticles)?e.length:void 0)?(c.article(b.idArticle,!1),c.article(a.updatedArticles[0].idArticle,a.updatedArticles[0]),"function"==typeof d?d():void 0):void 0}}(this)),!1},updateBatch:function(b,d){var e,f,g,h;for(f={action:d>0?"increase":"decrease",article:[]},g=0,h=b.length;h>g;g++)e=b[g],f.article.push({idArticle:e.idArticle,amount:1});return a.api.stockUpdate(f,function(a){var f,g,h,i,j,k;for(j=a.article,f=0,h=j.length;h>f;f++)e=j[f],c.article(e.idArticle,e);for(k=[],g=0,i=b.length;i>g;g++)e=b[g],k.push(e.count+=d);return k})},search:function(b,d){return null==d&&(d={count:0,articles:[]}),d.loading=!0,a.api.stockSearch({param2:b,param3:d.articles.length+1},function(){return function(a){var b;return d.count=a._range||(null!=(b=a.article)?b.length:void 0),d.count&&(d.articles=d.articles.concat(a.article.map(function(a){return c.article(a.idArticle,a)}))),d.loading=!1}}(this)),d},getLanguages:function(){return[1,2,3,4,5,6,7,8,9,10,11]},getConditions:function(){return["MT","NM","EX","GD","LP","PL","PO"]}}}]);